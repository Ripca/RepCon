╔════════════════════════════════════════════════════════════════════════════╗
║                                                                            ║
║              📊 DIAGRAMA DE ARQUITECTURA DEL PROYECTO                      ║
║                                                                            ║
╚════════════════════════════════════════════════════════════════════════════╝

┌────────────────────────────────────────────────────────────────────────────┐
│                          FLUJO DE DATOS GENERAL                            │
└────────────────────────────────────────────────────────────────────────────┘

                              ┌─────────────────┐
                              │   DATOS ENTRADA │
                              │  CSV/JSON/XML   │
                              │  3,000,000+     │
                              │   registros     │
                              └────────┬────────┘
                                       │
                    ┌──────────────────┼──────────────────┐
                    │                  │                  │
                    ▼                  ▼                  ▼
            ┌──────────────┐  ┌──────────────┐  ┌──────────────┐
            │   CSV Load   │  │  JSON Load   │  │   XML Load   │
            └──────┬───────┘  └──────┬───────┘  └──────┬───────┘
                    │                  │                  │
                    └──────────────────┼──────────────────┘
                                       │
                                       ▼
                        ┌──────────────────────────┐
                        │  DATA NORMALIZATION      │
                        │  - Fechas               │
                        │  - Montos               │
                        │  - Categorías           │
                        └──────────┬───────────────┘
                                   │
                                   ▼
                        ┌──────────────────────────┐
                        │  WEEKLY AGGREGATION      │
                        │  - Suma por semana       │
                        │  - Inicio: Domingo       │
                        └──────────┬───────────────┘
                                   │
                    ┌──────────────┼──────────────┐
                    │              │              │
                    ▼              ▼              ▼
            ┌──────────────┐ ┌──────────────┐ ┌──────────────┐
            │ STATISTICS   │ │ VISUALIZATION│ │ FORECASTING  │
            │ - Mean       │ │ - Timeseries │ │ - Regression │
            │ - Median     │ │ - Comparison │ │ - Seasonal   │
            │ - Std Dev    │ │ - Charts     │ │ - Confidence │
            └──────┬───────┘ └──────┬───────┘ └──────┬───────┘
                    │                  │                  │
                    └──────────────────┼──────────────────┘
                                       │
                                       ▼
                        ┌──────────────────────────┐
                        │   EXPORT RESULTS         │
                        │   - CSV Format           │
                        │   - Download             │
                        └──────────────────────────┘

┌────────────────────────────────────────────────────────────────────────────┐
│                    ARQUITECTURA DE DOS VERSIONES                           │
└────────────────────────────────────────────────────────────────────────────┘

VERSION 1: PYTHON (Backend + Frontend)
═══════════════════════════════════════════════════════════════════════════

                    ┌─────────────────────────────┐
                    │   NAVEGADOR WEB             │
                    │  (HTML + Plotly)            │
                    │  - Interfaz interactiva     │
                    │  - Gráficos dinámicos       │
                    └────────────┬────────────────┘
                                 │
                                 │ HTTP/REST
                                 │
                    ┌────────────▼────────────┐
                    │   FLASK SERVER          │
                    │   (app.py)              │
                    │  - 9 Endpoints API      │
                    │  - CORS habilitado      │
                    └────────────┬────────────┘
                                 │
                ┌────────────────┼────────────────┐
                │                │                │
                ▼                ▼                ▼
        ┌──────────────┐ ┌──────────────┐ ┌──────────────┐
        │ DATA         │ │ FORECASTER   │ │ STATISTICS   │
        │ PROCESSOR    │ │ (forecaster) │ │ (processor)  │
        │ (processor)  │ │              │ │              │
        │              │ │ - Regresión  │ │ - Mean       │
        │ - CSV Load   │ │ - Seasonal   │ │ - Median     │
        │ - JSON Load  │ │ - Confidence │ │ - Std Dev    │
        │ - XML Load   │ │              │ │              │
        │ - Normalize  │ │              │ │              │
        │ - Aggregate  │ │              │ │              │
        └──────────────┘ └──────────────┘ └──────────────┘
                │                │                │
                └────────────────┼────────────────┘
                                 │
                    ┌────────────▼────────────┐
                    │   DATOS PROCESADOS      │
                    │   (En memoria)          │
                    │  - Series temporales    │
                    │  - Pronósticos          │
                    │  - Estadísticas         │
                    └─────────────────────────┘


VERSION 2: WEB (HTML/CSS/JavaScript - Standalone)
═══════════════════════════════════════════════════════════════════════════

                    ┌─────────────────────────────┐
                    │   NAVEGADOR WEB             │
                    │  (index.html)               │
                    │  - Interfaz HTML5           │
                    │  - Estilos CSS3             │
                    │  - Lógica JavaScript        │
                    └────────────┬────────────────┘
                                 │
                ┌────────────────┼────────────────┐
                │                │                │
                ▼                ▼                ▼
        ┌──────────────┐ ┌──────────────┐ ┌──────────────┐
        │ DATA         │ │ FORECASTER   │ │ UI LOGIC     │
        │ PROCESSOR    │ │ (forecaster) │ │ (app.js)     │
        │ (processor)  │ │              │ │              │
        │              │ │ - Regresión  │ │ - Eventos    │
        │ - CSV Parse  │ │ - Seasonal   │ │ - Gráficos   │
        │ - Normalize  │ │ - Confidence │ │ - Tabla      │
        │ - Aggregate  │ │              │ │ - Exportar   │
        │              │ │              │ │              │
        └──────────────┘ └──────────────┘ └──────────────┘
                │                │                │
                └────────────────┼────────────────┘
                                 │
                    ┌────────────▼────────────┐
                    │   DATOS EN MEMORIA      │
                    │   (Cliente)             │
                    │  - Series temporales    │
                    │  - Pronósticos          │
                    │  - Estadísticas         │
                    └─────────────────────────┘

┌────────────────────────────────────────────────────────────────────────────┐
│                    FLUJO DE PRONÓSTICO DETALLADO                           │
└────────────────────────────────────────────────────────────────────────────┘

                    DATOS HISTÓRICOS
                    (52 semanas)
                           │
                           ▼
                    ┌──────────────┐
                    │ REGRESIÓN    │
                    │ LINEAL       │
                    │              │
                    │ y = mx + b   │
                    └──────┬───────┘
                           │
                    ┌──────▼───────┐
                    │ TENDENCIA    │
                    │ (Trend)      │
                    └──────┬───────┘
                           │
                    ┌──────▼──────────┐
                    │ ANÁLISIS        │
                    │ ESTACIONAL      │
                    │                 │
                    │ factor_p =      │
                    │ (prom_p - prom) │
                    │ / prom          │
                    └──────┬──────────┘
                           │
                    ┌──────▼──────────┐
                    │ PRONÓSTICO      │
                    │                 │
                    │ forecast =      │
                    │ trend ×         │
                    │ (1 + factor)    │
                    └──────┬──────────┘
                           │
                    ┌──────▼──────────┐
                    │ CONFIANZA       │
                    │ (95%)           │
                    │                 │
                    │ σ = residuales  │
                    │ upper = f + 1.96σ
                    │ lower = f - 1.96σ
                    └──────┬──────────┘
                           │
                           ▼
                    PRONÓSTICO FINAL
                    (14 semanas)

┌────────────────────────────────────────────────────────────────────────────┐
│                    ESTRUCTURA DE DATOS PRINCIPAL                           │
└────────────────────────────────────────────────────────────────────────────┘

ENTRADA (CSV/JSON/XML)
├── cliente_id: String
├── fecha: Date (ISO 8601 o DD/MM/YYYY)
├── monto: Float
└── categoria: String (10 categorías)

PROCESAMIENTO
├── Normalización
│   ├── Fechas → ISO 8601
│   ├── Montos → Float
│   └── Categorías → UPPERCASE
├── Agregación Semanal
│   ├── Inicio: Domingo
│   ├── Métrica: Suma
│   └── Período: 52 semanas
└── Estadísticas
    ├── Count
    ├── Mean
    ├── Median
    ├── Std Dev
    ├── Min
    └── Max

SALIDA (CSV)
├── fecha: Date
├── ALIMENTACION: Float
├── TRANSPORTE: Float
├── ENTRETENIMIENTO: Float
├── EDUCACION: Float
├── CUIDADO PERSONAL: Float
├── VIAJES: Float
├── COMPRAS EN LINEA: Float
├── HOGAR: Float
├── TECNOLOGIA: Float
└── ABASTECIMIENTO: Float

┌────────────────────────────────────────────────────────────────────────────┐
│                    COMPARACIÓN DE VERSIONES                                │
└────────────────────────────────────────────────────────────────────────────┘

                    PYTHON              WEB
                    ──────              ───
Instalación         2 min               30 seg
Dependencias        10 librerías        0 (CDN)
Escalabilidad       Muy alta            Media
Análisis avanzado   Sí                  Sí
API REST            Sí                  No
Offline             No                  Sí
Móvil               Sí                  Sí
Producción          Sí                  Sí
Velocidad           Rápido              Muy rápido
Complejidad         Media               Baja

┌────────────────────────────────────────────────────────────────────────────┐
│                    FLUJO DE USUARIO                                        │
└────────────────────────────────────────────────────────────────────────────┘

1. INICIO
   └─→ Abrir aplicación
       └─→ Cargar datos de ejemplo

2. EXPLORACIÓN
   └─→ Seleccionar categoría
       └─→ Visualizar serie temporal
           └─→ Observar patrones

3. ANÁLISIS
   └─→ Ver estadísticas
       └─→ Comparar categorías
           └─→ Identificar tendencias

4. PRONÓSTICO
   └─→ Ajustar parámetros
       └─→ Generar pronóstico
           └─→ Visualizar resultado

5. EXPORTACIÓN
   └─→ Descargar CSV
       └─→ Usar en Excel
           └─→ Compartir con equipo

╔════════════════════════════════════════════════════════════════════════════╗
║                                                                            ║
║                    ✅ ARQUITECTURA COMPLETA                               ║
║                                                                            ║
║  Dos versiones, misma funcionalidad, diferentes tecnologías               ║
║                                                                            ║
╚════════════════════════════════════════════════════════════════════════════╝

